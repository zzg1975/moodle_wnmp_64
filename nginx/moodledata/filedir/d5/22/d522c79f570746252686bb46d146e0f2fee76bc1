!function(){var t={4370:function(t,e,n){n(8783),n(1038);var r=n(857);t.exports=r.Array.from},3099:function(t){t.exports=function(t){if("function"!=typeof t)throw TypeError(String(t)+" is not a function");return t}},6077:function(t,e,n){var r=n(111);t.exports=function(t){if(!r(t)&&null!==t)throw TypeError("Can't set "+String(t)+" as a prototype");return t}},9670:function(t,e,n){var r=n(111);t.exports=function(t){if(!r(t))throw TypeError(String(t)+" is not an object");return t}},8457:function(t,e,n){"use strict";var r=n(9974),a=n(7908),i=n(3411),s=n(7659),o=n(7466),c=n(6135),u=n(1246);t.exports=function(t){var e,n,l,h,p,d,f=a(t),g="function"==typeof this?this:Array,b=arguments.length,v=b>1?arguments[1]:void 0,m=void 0!==v,y=u(f),w=0;if(m&&(v=r(v,b>2?arguments[2]:void 0,2)),null==y||g==Array&&s(y))for(n=new g(e=o(f.length));e>w;w++)d=m?v(f[w],w):f[w],c(n,w,d);else for(p=(h=y.call(f)).next,n=new g;!(l=p.call(h)).done;w++)d=m?i(h,v,[l.value,w],!0):l.value,c(n,w,d);return n.length=w,n}},1318:function(t,e,n){var r=n(5656),a=n(7466),i=n(1400),s=function(t){return function(e,n,s){var o,c=r(e),u=a(c.length),l=i(s,u);if(t&&n!=n){for(;u>l;)if((o=c[l++])!=o)return!0}else for(;u>l;l++)if((t||l in c)&&c[l]===n)return t||l||0;return!t&&-1}};t.exports={includes:s(!0),indexOf:s(!1)}},3411:function(t,e,n){var r=n(9670),a=n(9212);t.exports=function(t,e,n,i){try{return i?e(r(n)[0],n[1]):e(n)}catch(e){throw a(t),e}}},7072:function(t,e,n){var r=n(5112)("iterator"),a=!1;try{var i=0,s={next:function(){return{done:!!i++}},return:function(){a=!0}};s[r]=function(){return this},Array.from(s,(function(){throw 2}))}catch(t){}t.exports=function(t,e){if(!e&&!a)return!1;var n=!1;try{var i={};i[r]=function(){return{next:function(){return{done:n=!0}}}},t(i)}catch(t){}return n}},4326:function(t){var e={}.toString;t.exports=function(t){return e.call(t).slice(8,-1)}},648:function(t,e,n){var r=n(1694),a=n(4326),i=n(5112)("toStringTag"),s="Arguments"==a(function(){return arguments}());t.exports=r?a:function(t){var e,n,r;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),i))?n:s?a(e):"Object"==(r=a(e))&&"function"==typeof e.callee?"Arguments":r}},9920:function(t,e,n){var r=n(6656),a=n(3887),i=n(1236),s=n(3070);t.exports=function(t,e){for(var n=a(e),o=s.f,c=i.f,u=0;u<n.length;u++){var l=n[u];r(t,l)||o(t,l,c(e,l))}}},8544:function(t,e,n){var r=n(7293);t.exports=!r((function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype}))},4994:function(t,e,n){"use strict";var r=n(3383).IteratorPrototype,a=n(30),i=n(9114),s=n(8003),o=n(7497),c=function(){return this};t.exports=function(t,e,n){var u=e+" Iterator";return t.prototype=a(r,{next:i(1,n)}),s(t,u,!1,!0),o[u]=c,t}},8880:function(t,e,n){var r=n(9781),a=n(3070),i=n(9114);t.exports=r?function(t,e,n){return a.f(t,e,i(1,n))}:function(t,e,n){return t[e]=n,t}},9114:function(t){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},6135:function(t,e,n){"use strict";var r=n(4948),a=n(3070),i=n(9114);t.exports=function(t,e,n){var s=r(e);s in t?a.f(t,s,i(0,n)):t[s]=n}},654:function(t,e,n){"use strict";var r=n(2109),a=n(4994),i=n(9518),s=n(7674),o=n(8003),c=n(8880),u=n(1320),l=n(5112),h=n(1913),p=n(7497),d=n(3383),f=d.IteratorPrototype,g=d.BUGGY_SAFARI_ITERATORS,b=l("iterator"),v="keys",m="values",y="entries",w=function(){return this};t.exports=function(t,e,n,l,d,D,E){a(n,e,l);var x,S,T,A=function(t){if(t===d&&I)return I;if(!g&&t in P)return P[t];switch(t){case v:case m:case y:return function(){return new n(this,t)}}return function(){return new n(this)}},O=e+" Iterator",M=!1,P=t.prototype,L=P[b]||P["@@iterator"]||d&&P[d],I=!g&&L||A(d),k="Array"==e&&P.entries||L;if(k&&(x=i(k.call(new t)),f!==Object.prototype&&x.next&&(h||i(x)===f||(s?s(x,f):"function"!=typeof x[b]&&c(x,b,w)),o(x,O,!0,!0),h&&(p[O]=w))),d==m&&L&&L.name!==m&&(M=!0,I=function(){return L.call(this)}),h&&!E||P[b]===I||c(P,b,I),p[e]=I,d)if(S={values:A(m),keys:D?I:A(v),entries:A(y)},E)for(T in S)(g||M||!(T in P))&&u(P,T,S[T]);else r({target:e,proto:!0,forced:g||M},S);return S}},9781:function(t,e,n){var r=n(7293);t.exports=!r((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},317:function(t,e,n){var r=n(7854),a=n(111),i=r.document,s=a(i)&&a(i.createElement);t.exports=function(t){return s?i.createElement(t):{}}},8113:function(t,e,n){var r=n(5005);t.exports=r("navigator","userAgent")||""},7392:function(t,e,n){var r,a,i=n(7854),s=n(8113),o=i.process,c=i.Deno,u=o&&o.versions||c&&c.version,l=u&&u.v8;l?a=(r=l.split("."))[0]<4?1:r[0]+r[1]:s&&(!(r=s.match(/Edge\/(\d+)/))||r[1]>=74)&&(r=s.match(/Chrome\/(\d+)/))&&(a=r[1]),t.exports=a&&+a},748:function(t){t.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},2109:function(t,e,n){var r=n(7854),a=n(1236).f,i=n(8880),s=n(1320),o=n(3505),c=n(9920),u=n(4705);t.exports=function(t,e){var n,l,h,p,d,f=t.target,g=t.global,b=t.stat;if(n=g?r:b?r[f]||o(f,{}):(r[f]||{}).prototype)for(l in e){if(p=e[l],h=t.noTargetGet?(d=a(n,l))&&d.value:n[l],!u(g?l:f+(b?".":"#")+l,t.forced)&&void 0!==h){if(typeof p==typeof h)continue;c(p,h)}(t.sham||h&&h.sham)&&i(p,"sham",!0),s(n,l,p,t)}}},7293:function(t){t.exports=function(t){try{return!!t()}catch(t){return!0}}},9974:function(t,e,n){var r=n(3099);t.exports=function(t,e,n){if(r(t),void 0===e)return t;switch(n){case 0:return function(){return t.call(e)};case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,a){return t.call(e,n,r,a)}}return function(){return t.apply(e,arguments)}}},5005:function(t,e,n){var r=n(7854),a=function(t){return"function"==typeof t?t:void 0};t.exports=function(t,e){return arguments.length<2?a(r[t]):r[t]&&r[t][e]}},1246:function(t,e,n){var r=n(648),a=n(7497),i=n(5112)("iterator");t.exports=function(t){if(null!=t)return t[i]||t["@@iterator"]||a[r(t)]}},7854:function(t,e,n){var r=function(t){return t&&t.Math==Math&&t};t.exports=r("object"==typeof globalThis&&globalThis)||r("object"==typeof window&&window)||r("object"==typeof self&&self)||r("object"==typeof n.g&&n.g)||function(){return this}()||Function("return this")()},6656:function(t,e,n){var r=n(7908),a={}.hasOwnProperty;t.exports=Object.hasOwn||function(t,e){return a.call(r(t),e)}},3501:function(t){t.exports={}},490:function(t,e,n){var r=n(5005);t.exports=r("document","documentElement")},4664:function(t,e,n){var r=n(9781),a=n(7293),i=n(317);t.exports=!r&&!a((function(){return 7!=Object.defineProperty(i("div"),"a",{get:function(){return 7}}).a}))},8361:function(t,e,n){var r=n(7293),a=n(4326),i="".split;t.exports=r((function(){return!Object("z").propertyIsEnumerable(0)}))?function(t){return"String"==a(t)?i.call(t,""):Object(t)}:Object},2788:function(t,e,n){var r=n(5465),a=Function.toString;"function"!=typeof r.inspectSource&&(r.inspectSource=function(t){return a.call(t)}),t.exports=r.inspectSource},9909:function(t,e,n){var r,a,i,s=n(8536),o=n(7854),c=n(111),u=n(8880),l=n(6656),h=n(5465),p=n(6200),d=n(3501),f="Object already initialized",g=o.WeakMap;if(s||h.state){var b=h.state||(h.state=new g),v=b.get,m=b.has,y=b.set;r=function(t,e){if(m.call(b,t))throw new TypeError(f);return e.facade=t,y.call(b,t,e),e},a=function(t){return v.call(b,t)||{}},i=function(t){return m.call(b,t)}}else{var w=p("state");d[w]=!0,r=function(t,e){if(l(t,w))throw new TypeError(f);return e.facade=t,u(t,w,e),e},a=function(t){return l(t,w)?t[w]:{}},i=function(t){return l(t,w)}}t.exports={set:r,get:a,has:i,enforce:function(t){return i(t)?a(t):r(t,{})},getterFor:function(t){return function(e){var n;if(!c(e)||(n=a(e)).type!==t)throw TypeError("Incompatible receiver, "+t+" required");return n}}}},7659:function(t,e,n){var r=n(5112),a=n(7497),i=r("iterator"),s=Array.prototype;t.exports=function(t){return void 0!==t&&(a.Array===t||s[i]===t)}},4705:function(t,e,n){var r=n(7293),a=/#|\.prototype\./,i=function(t,e){var n=o[s(t)];return n==u||n!=c&&("function"==typeof e?r(e):!!e)},s=i.normalize=function(t){return String(t).replace(a,".").toLowerCase()},o=i.data={},c=i.NATIVE="N",u=i.POLYFILL="P";t.exports=i},111:function(t){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},1913:function(t){t.exports=!1},2190:function(t,e,n){var r=n(5005),a=n(3307);t.exports=a?function(t){return"symbol"==typeof t}:function(t){var e=r("Symbol");return"function"==typeof e&&Object(t)instanceof e}},9212:function(t,e,n){var r=n(9670);t.exports=function(t){var e=t.return;if(void 0!==e)return r(e.call(t)).value}},3383:function(t,e,n){"use strict";var r,a,i,s=n(7293),o=n(9518),c=n(8880),u=n(6656),l=n(5112),h=n(1913),p=l("iterator"),d=!1;[].keys&&("next"in(i=[].keys())?(a=o(o(i)))!==Object.prototype&&(r=a):d=!0);var f=null==r||s((function(){var t={};return r[p].call(t)!==t}));f&&(r={}),h&&!f||u(r,p)||c(r,p,(function(){return this})),t.exports={IteratorPrototype:r,BUGGY_SAFARI_ITERATORS:d}},7497:function(t){t.exports={}},133:function(t,e,n){var r=n(7392),a=n(7293);t.exports=!!Object.getOwnPropertySymbols&&!a((function(){var t=Symbol();return!String(t)||!(Object(t)instanceof Symbol)||!Symbol.sham&&r&&r<41}))},8536:function(t,e,n){var r=n(7854),a=n(2788),i=r.WeakMap;t.exports="function"==typeof i&&/native code/.test(a(i))},30:function(t,e,n){var r,a=n(9670),i=n(6048),s=n(748),o=n(3501),c=n(490),u=n(317),l=n(6200),h=l("IE_PROTO"),p=function(){},d=function(t){return"<script>"+t+"</"+"script>"},f=function(t){t.write(d("")),t.close();var e=t.parentWindow.Object;return t=null,e},g=function(){try{r=new ActiveXObject("htmlfile")}catch(t){}g=document.domain&&r?f(r):function(){var t,e=u("iframe");if(e.style)return e.style.display="none",c.appendChild(e),e.src=String("javascript:"),(t=e.contentWindow.document).open(),t.write(d("document.F=Object")),t.close(),t.F}()||f(r);for(var t=s.length;t--;)delete g.prototype[s[t]];return g()};o[h]=!0,t.exports=Object.create||function(t,e){var n;return null!==t?(p.prototype=a(t),n=new p,p.prototype=null,n[h]=t):n=g(),void 0===e?n:i(n,e)}},6048:function(t,e,n){var r=n(9781),a=n(3070),i=n(9670),s=n(1956);t.exports=r?Object.defineProperties:function(t,e){i(t);for(var n,r=s(e),o=r.length,c=0;o>c;)a.f(t,n=r[c++],e[n]);return t}},3070:function(t,e,n){var r=n(9781),a=n(4664),i=n(9670),s=n(4948),o=Object.defineProperty;e.f=r?o:function(t,e,n){if(i(t),e=s(e),i(n),a)try{return o(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(t[e]=n.value),t}},1236:function(t,e,n){var r=n(9781),a=n(5296),i=n(9114),s=n(5656),o=n(4948),c=n(6656),u=n(4664),l=Object.getOwnPropertyDescriptor;e.f=r?l:function(t,e){if(t=s(t),e=o(e),u)try{return l(t,e)}catch(t){}if(c(t,e))return i(!a.f.call(t,e),t[e])}},8006:function(t,e,n){var r=n(6324),a=n(748).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return r(t,a)}},5181:function(t,e){e.f=Object.getOwnPropertySymbols},9518:function(t,e,n){var r=n(6656),a=n(7908),i=n(6200),s=n(8544),o=i("IE_PROTO"),c=Object.prototype;t.exports=s?Object.getPrototypeOf:function(t){return t=a(t),r(t,o)?t[o]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?c:null}},6324:function(t,e,n){var r=n(6656),a=n(5656),i=n(1318).indexOf,s=n(3501);t.exports=function(t,e){var n,o=a(t),c=0,u=[];for(n in o)!r(s,n)&&r(o,n)&&u.push(n);for(;e.length>c;)r(o,n=e[c++])&&(~i(u,n)||u.push(n));return u}},1956:function(t,e,n){var r=n(6324),a=n(748);t.exports=Object.keys||function(t){return r(t,a)}},5296:function(t,e){"use strict";var n={}.propertyIsEnumerable,r=Object.getOwnPropertyDescriptor,a=r&&!n.call({1:2},1);e.f=a?function(t){var e=r(this,t);return!!e&&e.enumerable}:n},7674:function(t,e,n){var r=n(9670),a=n(6077);t.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,n={};try{(t=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(n,[]),e=n instanceof Array}catch(t){}return function(n,i){return r(n),a(i),e?t.call(n,i):n.__proto__=i,n}}():void 0)},2140:function(t,e,n){var r=n(111);t.exports=function(t,e){var n,a;if("string"===e&&"function"==typeof(n=t.toString)&&!r(a=n.call(t)))return a;if("function"==typeof(n=t.valueOf)&&!r(a=n.call(t)))return a;if("string"!==e&&"function"==typeof(n=t.toString)&&!r(a=n.call(t)))return a;throw TypeError("Can't convert object to primitive value")}},3887:function(t,e,n){var r=n(5005),a=n(8006),i=n(5181),s=n(9670);t.exports=r("Reflect","ownKeys")||function(t){var e=a.f(s(t)),n=i.f;return n?e.concat(n(t)):e}},857:function(t,e,n){var r=n(7854);t.exports=r},1320:function(t,e,n){var r=n(7854),a=n(8880),i=n(6656),s=n(3505),o=n(2788),c=n(9909),u=c.get,l=c.enforce,h=String(String).split("String");(t.exports=function(t,e,n,o){var c,u=!!o&&!!o.unsafe,p=!!o&&!!o.enumerable,d=!!o&&!!o.noTargetGet;"function"==typeof n&&("string"!=typeof e||i(n,"name")||a(n,"name",e),(c=l(n)).source||(c.source=h.join("string"==typeof e?e:""))),t!==r?(u?!d&&t[e]&&(p=!0):delete t[e],p?t[e]=n:a(t,e,n)):p?t[e]=n:s(e,n)})(Function.prototype,"toString",(function(){return"function"==typeof this&&u(this).source||o(this)}))},4488:function(t){t.exports=function(t){if(null==t)throw TypeError("Can't call method on "+t);return t}},3505:function(t,e,n){var r=n(7854);t.exports=function(t,e){try{Object.defineProperty(r,t,{value:e,configurable:!0,writable:!0})}catch(n){r[t]=e}return e}},8003:function(t,e,n){var r=n(3070).f,a=n(6656),i=n(5112)("toStringTag");t.exports=function(t,e,n){t&&!a(t=n?t:t.prototype,i)&&r(t,i,{configurable:!0,value:e})}},6200:function(t,e,n){var r=n(2309),a=n(9711),i=r("keys");t.exports=function(t){return i[t]||(i[t]=a(t))}},5465:function(t,e,n){var r=n(7854),a=n(3505),i="__core-js_shared__",s=r[i]||a(i,{});t.exports=s},2309:function(t,e,n){var r=n(1913),a=n(5465);(t.exports=function(t,e){return a[t]||(a[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.16.1",mode:r?"pure":"global",copyright:"© 2021 Denis Pushkarev (zloirock.ru)"})},8710:function(t,e,n){var r=n(9958),a=n(1340),i=n(4488),s=function(t){return function(e,n){var s,o,c=a(i(e)),u=r(n),l=c.length;return u<0||u>=l?t?"":void 0:(s=c.charCodeAt(u))<55296||s>56319||u+1===l||(o=c.charCodeAt(u+1))<56320||o>57343?t?c.charAt(u):s:t?c.slice(u,u+2):o-56320+(s-55296<<10)+65536}};t.exports={codeAt:s(!1),charAt:s(!0)}},1400:function(t,e,n){var r=n(9958),a=Math.max,i=Math.min;t.exports=function(t,e){var n=r(t);return n<0?a(n+e,0):i(n,e)}},5656:function(t,e,n){var r=n(8361),a=n(4488);t.exports=function(t){return r(a(t))}},9958:function(t){var e=Math.ceil,n=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?n:e)(t)}},7466:function(t,e,n){var r=n(9958),a=Math.min;t.exports=function(t){return t>0?a(r(t),9007199254740991):0}},7908:function(t,e,n){var r=n(4488);t.exports=function(t){return Object(r(t))}},7593:function(t,e,n){var r=n(111),a=n(2190),i=n(2140),s=n(5112)("toPrimitive");t.exports=function(t,e){if(!r(t)||a(t))return t;var n,o=t[s];if(void 0!==o){if(void 0===e&&(e="default"),n=o.call(t,e),!r(n)||a(n))return n;throw TypeError("Can't convert object to primitive value")}return void 0===e&&(e="number"),i(t,e)}},4948:function(t,e,n){var r=n(7593),a=n(2190);t.exports=function(t){var e=r(t,"string");return a(e)?e:String(e)}},1694:function(t,e,n){var r={};r[n(5112)("toStringTag")]="z",t.exports="[object z]"===String(r)},1340:function(t,e,n){var r=n(2190);t.exports=function(t){if(r(t))throw TypeError("Cannot convert a Symbol value to a string");return String(t)}},9711:function(t){var e=0,n=Math.random();t.exports=function(t){return"Symbol("+String(void 0===t?"":t)+")_"+(++e+n).toString(36)}},3307:function(t,e,n){var r=n(133);t.exports=r&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},5112:function(t,e,n){var r=n(7854),a=n(2309),i=n(6656),s=n(9711),o=n(133),c=n(3307),u=a("wks"),l=r.Symbol,h=c?l:l&&l.withoutSetter||s;t.exports=function(t){return i(u,t)&&(o||"string"==typeof u[t])||(o&&i(l,t)?u[t]=l[t]:u[t]=h("Symbol."+t)),u[t]}},1038:function(t,e,n){var r=n(2109),a=n(8457);r({target:"Array",stat:!0,forced:!n(7072)((function(t){Array.from(t)}))},{from:a})},8783:function(t,e,n){"use strict";var r=n(8710).charAt,a=n(1340),i=n(9909),s=n(654),o="String Iterator",c=i.set,u=i.getterFor(o);s(String,"String",(function(t){c(this,{type:o,string:a(t),index:0})}),(function(){var t,e=u(this),n=e.string,a=e.index;return a>=n.length?{value:void 0,done:!0}:(t=r(n,a),e.index+=t.length,{value:t,done:!1})}))}},e={};function n(r){var a=e[r];if(void 0!==a)return a.exports;var i=e[r]={exports:{}};return t[r](i,i.exports,n),i.exports}n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),function(){"use strict";n(4370);function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}var e=function(){function e(){}return e.extend=function(){for(var e=1;e<arguments.length;e++)for(var n in arguments[e])Object.prototype.hasOwnProperty.call(arguments[e],n)&&("object"===t(arguments[0][n])&&"object"===t(arguments[e][n])?this.extend(arguments[0][n],arguments[e][n]):arguments[0][n]=arguments[e][n]);return arguments[0]},e.htmlDecode=function(t){return(new DOMParser).parseFromString(t,"text/html").documentElement.textContent},e.stripHTML=function(t){var e=document.createElement("div");return e.innerHTML=t,e.textContent||e.innerText||""},e.createArray=function(t){var n=new Array(t||0),r=t;if(arguments.length>1)for(var a=Array.prototype.slice.call(arguments,1);r--;)n[t-1-r]=e.createArray.apply(this,a);return n},e.swapDOMElements=function(t,e){var n=t.parentNode,r=e.parentNode;if(n&&r){var a=document.createElement("div"),i=document.createElement("div");n.replaceChild(a,t),r.replaceChild(i,e),n.replaceChild(e,a),r.replaceChild(t,i)}},e.shuffleDOMElements=function(t){for(var n=t.length-1;n>0;n--){var r=Math.floor(Math.random()*(n+1));n!==r&&e.swapDOMElements(t[n],t[r])}},e.formatLanguageCode=function(t){if("string"!=typeof t)return t;var e=t.split("-");return e[0]=e[0].toLowerCase(),e.length>1&&(e[1]=e[1].toUpperCase()),t=e.join("-")},e}(),r=function(){function t(t,n){var r=this;this.params=e.extend({a11y:{active:"",disabled:"",inactive:""},active:!1,classes:[],disabled:!1,type:"pulse"},t||{}),Array.isArray(this.params.classes)||(this.params.classes=[this.params.classes]),"pulse"===this.params.type&&(this.params.a11y.inactive||(this.params.a11y.inactive=this.params.a11y.active||""),this.params.a11y.active||(this.params.a11y.active=this.params.a11y.inactive||"")),this.active=this.params.active,this.disabled=this.params.disabled,this.callbacks=n||{},this.callbacks.onClick=this.callbacks.onClick||function(){},this.button=document.createElement("button"),this.params.classes&&this.params.classes.forEach((function(t){r.button.classList.add(t)})),this.button.setAttribute("aria-pressed",this.params.active),this.button.setAttribute("tabindex","-1"),!0===this.params.active?this.activate():this.deactivate(),!0===this.params.disabled?this.disable():this.enable(),this.button.addEventListener("mouseup",(function(t){r.disabled||("toggle"===r.params.type&&r.toggle(),setTimeout((function(){r.callbacks.onClick(t)}),100))}))}var n=t.prototype;return n.getDOM=function(){return this.button},n.show=function(){this.button.classList.remove("h5p-sort-paragraphs-no-display")},n.hide=function(){this.button.classList.add("h5p-sort-paragraphs-no-display")},n.enable=function(){this.disabled=!1,this.button.classList.remove("h5p-sort-paragraphs-disabled"),this.active?this.activate():this.deactivate()},n.disable=function(){this.button.classList.add("h5p-sort-paragraphs-disabled"),this.button.setAttribute("aria-label",this.params.a11y.disabled),this.button.setAttribute("title",this.params.a11y.disabled),this.disabled=!0},n.activate=function(){this.disabled||("toggle"===this.params.type&&(this.button.classList.add("h5p-sort-paragraphs-button-active"),this.button.setAttribute("aria-pressed",!0)),this.button.setAttribute("aria-label",this.params.a11y.active),this.button.setAttribute("title",this.params.a11y.active),this.active=!0)},n.deactivate=function(){this.disabled||(this.active=!1,"toggle"===this.params.type&&(this.button.classList.remove("h5p-sort-paragraphs-active"),this.button.setAttribute("aria-pressed",!1)),this.button.setAttribute("aria-label",this.params.a11y.inactive),this.button.setAttribute("title",this.params.a11y.inactive))},n.toggle=function(){this.disabled||(this.active?this.deactivate():this.activate())},n.isActive=function(){return this.active},n.isDisabled=function(){return this.disabled},t}(),a=function(){function t(t,n){this.params=t,this.callbacks=e.extend({onMoveUp:function(){},onMoveDown:function(){},onFocusOut:function(){},onMouseDown:function(){},onMouseUp:function(){},onDragStart:function(){},onDragEnter:function(){},onDragLeave:function(){},onDragEnd:function(){},onKeyboardUp:function(){},onKeyboardDown:function(){},onKeyboardSelect:function(){},onKeyboardCancel:function(){}},n),this.selected=!1,this.shown=!0,this.buttons=[],this.content=this.buildParagraph(this.params.text,this.params.l10n),this.placeholder=document.createElement("div"),this.placeholder.classList.add("h5p-sort-paragraphs-paragraph-placeholder"),this.placeholder.addEventListener("dragover",(function(t){t.preventDefault()})),this.placeholder.addEventListener("drop",(function(t){t.preventDefault()}))}var n=t.prototype;return n.getDOM=function(){return this.content},n.buildParagraph=function(){var t,e,n,r,a=document.createElement("div");a.classList.add("h5p-sort-paragraphs-paragraph"),a.setAttribute("role","listitem"),a.setAttribute("draggable",!0),this.containerText=this.buildDIVContainer({classText:"h5p-sort-paragraphs-paragraph-container",innerHTML:this.params.text}),a.appendChild(this.containerText);var i=this.buildDIVContainer({classText:"h5p-sort-paragraphs-paragraph-button-container",attributes:{"aria-hidden":"true"}});a.appendChild(i),null!==(t=this.params)&&void 0!==t&&null!==(e=t.options)&&void 0!==e&&e.addButtonsForMovement&&(this.buttons.up=this.buildButtonUp(),i.appendChild(this.buttons.up.getDOM()));var s=this.buildDIVContainer({classText:"h5p-sort-paragraphs-paragraph-button-container",attributes:{"aria-hidden":"true"}});return a.appendChild(s),this.containerCorrections=this.buildDIVContainer({classText:"h5p-sort-paragraphs-paragraph-corrections"}),s.appendChild(this.containerCorrections),null!==(n=this.params)&&void 0!==n&&null!==(r=n.options)&&void 0!==r&&r.addButtonsForMovement&&(this.buttons.down=this.buildButtonDown(),s.appendChild(this.buttons.down.getDOM())),this.scoreExplanations=this.buildDIVContainer({classText:"h5p-sort-paragraphs-paragraph-score-explanations"}),s.appendChild(this.scoreExplanations),this.addKeyboardHandlers(a),this.addDragHandlers(a),a},n.buildDIVContainer=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=document.createElement("div");if(t.classText&&e.classList.add(t.classText),t.innerHTML&&(e.innerHTML=t.innerHTML),t.attributes)for(var n in t.attributes)e.setAttribute(n,t.attributes[n]);return e},n.buildButtonUp=function(){var t=this;return new r({a11y:{active:this.params.l10n.up,disabled:this.params.l10n.disabled},classes:["h5p-sort-paragraphs-button","h5p-sort-paragraphs-paragraph-button-up"]},{onClick:function(){t.callbacks.onMoveUp(t.content)}})},n.buildButtonDown=function(){var t=this;return new r({a11y:{active:this.params.l10n.down,disabled:this.params.l10n.disabled},classes:["h5p-sort-paragraphs-button","h5p-sort-paragraphs-paragraph-button-down"]},{onClick:function(){t.callbacks.onMoveDown(t.content)}})},n.addKeyboardHandlers=function(t){var e=this;t.addEventListener("keydown",(function(t){switch(t.code){case"ArrowUp":if(t.preventDefault(),t.currentTarget===t.currentTarget.parentNode.firstChild)return;e.callbacks.onKeyboardUp(t.currentTarget);break;case"ArrowDown":if(t.preventDefault(),t.currentTarget===t.currentTarget.parentNode.lastChild)return;e.callbacks.onKeyboardDown(t.currentTarget);break;case"Enter":case"Space":if(e.disabled)return;e.callbacks.onKeyboardSelect(t.currentTarget);break;case"Escape":if(e.disabled)return;e.callbacks.onKeyboardCancel(t.currentTarget)}}))},n.addDragHandlers=function(t){var e=this;t.addEventListener("mousedown",(function(t){e.handleMouseUpDown(t,"onMouseDown")})),t.addEventListener("mouseup",(function(t){e.handleMouseUpDown(t,"onMouseUp")})),t.addEventListener("focusout",(function(t){e.toggleEffect("selected",!1),e.callbacks.onFocusOut(t.currentTarget)})),t.addEventListener("dragstart",(function(t){e.handleDragStart(t)})),t.addEventListener("dragover",(function(t){e.handleDragOver(t)})),t.addEventListener("dragenter",(function(t){e.handleDragEnter(t)})),t.addEventListener("dragleave",(function(t){e.handleDragLeave(t)})),t.addEventListener("dragend",(function(t){e.handleDragEnd(t)})),t.addEventListener("touchstart",(function(n){n.cancelable&&!e.disabled&&t.setAttribute("draggable",!1)})),t.addEventListener("touchend",(function(){e.disabled||t.setAttribute("draggable",!0)}))},n.showPlaceholder=function(){this.isShown()&&(this.placeholder.style.width="".concat(this.content.offsetWidth,"px"),this.placeholder.style.height="".concat(this.content.offsetHeight,"px"),this.attachPlaceholder())},n.attachPlaceholder=function(){this.content.parentNode.insertBefore(this.placeholder,this.content.nextSibling)},n.hidePlaceholder=function(){this.placeholder.parentNode&&this.placeholder.parentNode.removeChild(this.placeholder)},n.show=function(){this.content.classList.remove("h5p-sort-paragraphs-no-display"),this.shown=!0},n.hide=function(){this.content.classList.add("h5p-sort-paragraphs-no-display"),this.shown=!1},n.isShown=function(){return this.shown},n.isSelected=function(){return this.selected},n.select=function(){this.selected=!0,this.toggleEffect("selected",!0)},n.unselect=function(){this.selected=!1,this.toggleEffect("selected",!1)},n.enable=function(){for(var t in this.content.setAttribute("draggable",!0),this.toggleEffect("disabled",!1),this.buttons)this.buttons[t].enable();this.disabled=!1},n.disable=function(){for(var t in this.disabled=!0,this.content.setAttribute("draggable",!1),this.toggleEffect("disabled",!0),this.buttons)this.buttons[t].disable()},n.focus=function(){this.content.focus()},n.getText=function(){return this.containerText.innerHTML},n.setText=function(t){"string"==typeof t&&(this.containerText.innerHTML=t)},n.setTabIndex=function(t){"number"==typeof t&&this.content.setAttribute("tabIndex",t)},n.reset=function(){this.content.classList.remove("disabled"),this.content.classList.remove("solution"),this.unselect()},n.resetDragging=function(){clearTimeout(this.placeholderTimeout),this.hidePlaceholder(),this.show(),this.showButtons(),this.toggleEffect("over",!1)},n.showButtons=function(){for(var t in this.buttons)this.buttons[t].show()},n.hideButtons=function(){for(var t in this.buttons)this.buttons[t].hide()},n.toggleButton=function(t,e){t&&this.buttons[t]&&"boolean"==typeof e&&(e?this.buttons[t].enable():this.buttons[t].disable())},n.toggleEffect=function(t,e){"boolean"==typeof e&&-1!==["over","ghosted","disabled","selected","correct","wrong","solution"].indexOf(t)&&(e?this.content.classList.add("h5p-sort-paragraphs-".concat(t)):this.content.classList.remove("h5p-sort-paragraphs-".concat(t)))},n.translate=function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};"number"==typeof e.x||"number"==typeof e.y?(this.content.classList.add("animate-translation"),setTimeout((function(){t.content.style.transform="translate(".concat(e.x||0,"px, ").concat(e.y||0,"px)")}),0)):(this.content.classList.remove("animate-translation"),this.content.style.transform="")},n.setAriaLabel=function(t){this.content.setAttribute("aria-label",t)},n.showScoreExplanation=function(t){this.scoreExplanations.appendChild(t)},n.hideScoreExplanation=function(){this.scoreExplanations.innerHTML=""},n.handleMouseUpDown=function(t,e){this.disabled||("onMouseDown"===e&&(this.pointerPosition={x:t.clientX,y:t.clientY}),!this.params.options.addButtonsForMovement||t.target!==this.buttons.up.getDOM()&&t.target!==this.buttons.down.getDOM()?this.callbacks[e](t.currentTarget):this.content.setAttribute("draggable",!0))},n.handleDragStart=function(t){var e=this;this.disabled||(this.hideButtons(),this.toggleEffect("over",!0),t.dataTransfer.effectAllowed="move",t.dataTransfer.setDragImage(this.content,this.pointerPosition.x-this.content.offsetLeft,this.pointerPosition.y-this.content.offsetTop),clearTimeout(this.placeholderTimeout),this.placeholderTimeout=setTimeout((function(){e.showPlaceholder(),e.hide()}),0),this.callbacks.onDragStart(t.currentTarget))},n.handleDragOver=function(t){this.disabled||t.preventDefault()},n.handleDragEnter=function(t){this.disabled||this.callbacks.onDragEnter(t.currentTarget)},n.handleDragLeave=function(t){this.disabled||this.content!==t.target||this.content.contains(t.fromElement)||this.callbacks.onDragLeave(t.currentTarget)},n.handleDragEnd=function(t){this.disabled||(this.resetDragging(),this.callbacks.onDragEnd(t.currentTarget))},t}(),i=function(){function t(){this.content=this.buildSeparator()}var e=t.prototype;return e.getDOM=function(){return this.content},e.buildSeparator=function(){var t=document.createElement("div");return t.classList.add("h5p-sort-paragraphs-separator"),t},e.show=function(){this.content.classList.remove("h5p-sort-paragraphs-no-display")},e.hide=function(){this.content.classList.add("h5p-sort-paragraphs-no-display")},e.toggleEffect=function(t,e){"boolean"==typeof e&&-1!==["correct","wrong"].indexOf(t)&&(e?this.content.classList.add("h5p-sort-paragraphs-".concat(t)):this.content.classList.remove("h5p-sort-paragraphs-".concat(t)))},e.setAriaLabel=function(t){this.content.setAttribute("aria-label",t)},e.showScoreExplanation=function(t){this.content.classList.contains("h5p-question-plus-one")||this.content.classList.contains("h5p-question-minus-one")||this.content.appendChild(t)},e.hideScoreExplanation=function(){var t=this.content.querySelector(".h5p-question-plus-one, .h5p-question-minus.one");t&&this.content.removeChild(t)},t}(),s=function(){function t(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.params=n,this.callbacks=e.extend({onInteracted:function(){},read:function(){}},r),this.content=document.createElement("div"),this.content.classList.add("h5p-sort-paragraphs-content"),this.draggedElement=null,this.answerGiven=!1,this.enabled=!0,this.oldOrder=null,this.selectedDraggable=null,this.isMouseDownOnDraggable=!1,this.handleSwapTransitionEnded=this.handleSwapTransitionEnded.bind(this),this.handleSwapSolutionEnded=this.handleSwapSolutionEnded.bind(this),this.options={scoringMode:n.scoringMode||"transitions",penalties:"boolean"!=typeof n.penalties||n.penalties,duplicatesInterchangeable:n.duplicatesInterchangeable},this.ariaTemplates=this.buildAriaTemplates();var a=document.createElement("div");a.classList.add("h5p-sort-paragraphs-task-description"),a.innerHTML=n.taskDescription,this.content.appendChild(a),this.paragraphs=n.paragraphs.map((function(e){return t.buildParagraph(e)})),this.separators=[],n.paragraphs.forEach((function(e,r){r!==n.paragraphs.length-2&&t.separators.push(new i)})),this.list=this.buildList(this.paragraphs),this.content.appendChild(this.list),n.previousState&&n.previousState.order?this.reorderDraggables(n.previousState.order):e.shuffleDOMElements(this.paragraphs.map((function(t){return t.getDOM()}))),this.resetAriaLabels(),this.resetDraggablesTabIndex(),this.resetDraggables()}var n=t.prototype;return n.reorderDraggables=function(t){for(var n,r=0;r<t.length;r++){n=this.getDraggables();var a=this.getDraggablesOrder();a[r]!==t[r]&&e.swapDOMElements(n[r],n[a.indexOf(t[r])])}},n.getDOM=function(){return this.content},n.showResults=function(){var t=this,e=this.computeResults();this.list.setAttribute("aria-label",this.params.a11y.listDescriptionCheckAnswer),this.paragraphs.forEach((function(t){t.hideButtons(),t.disable()})),"positions"===this.options.scoringMode?(this.showScoreExplanation(this.getDraggables().map((function(e){return t.getParagraph(e)})),e),this.addScoreAria(this.getDraggables(),e)):"transitions"===this.options.scoringMode&&(this.showScoreExplanation(this.separators,e),this.addScoreAria(this.getDraggables(),e),this.setAriaLabel(this.getDraggables().pop(),{action:"neutral"})),this.resetDraggablesTabIndex()},n.hideResults=function(){this.paragraphs.concat(this.separators).forEach((function(t){t.toggleEffect("correct",!1),t.toggleEffect("wrong",!1),t.setAriaLabel(""),t.hideScoreExplanation()}))},n.showSolutions=function(){var t=this;this.hideResults(),this.list.setAttribute("aria-label",this.params.a11y.listDescriptionShowSolution),this.paragraphs.forEach((function(t){t.toggleEffect("solution",!0)})),this.paragraphs[this.paragraphs.length-1].getDOM().addEventListener("transitionend",this.handleSwapSolutionEnded);var e=this.getDraggables(),n=e[0].offsetTop;e.forEach((function(r,a){a>0&&(n+=t.paragraphs[a-1].getDOM().offsetHeight+r.offsetTop-e[a-1].offsetTop-e[a-1].offsetHeight),t.paragraphs[a].translate({y:n-t.paragraphs[a].getDOM().offsetTop})}))},n.handleSwapSolutionEnded=function(){var t=this;this.paragraphs[this.paragraphs.length-1].getDOM().removeEventListener("transitionend",this.handleSwapSolutionEnded),this.paragraphs.forEach((function(n,r){n.translate();var a=t.getDraggables(),i=a.indexOf(n.getDOM());i!==r&&e.swapDOMElements(a[r],a[i])})),this.resetAriaLabels(),this.resetDraggablesTabIndex(),this.getDraggables().forEach((function(e){t.setAriaLabel(e,{action:"solution"})}))},n.addScoreAria=function(t,e){var n=this;e.correctAnswers.forEach((function(e,r){var a=t[r],i=n.options.penalties&&"positions"===n.options.scoringMode,s={action:"positions"===n.options.scoringMode?"resultPositions":"resultTransitions",result:!0===e?n.params.a11y.correct:n.params.a11y.wrong,points:!0===e?n.params.a11y.point.replace("@score",1):i?n.params.a11y.point.replace("@score",-1):void 0};n.setAriaLabel(a,s)}))},n.showScoreExplanation=function(t,e){var n=this;this.scorePoints=this.scorePoints||new H5P.Question.ScorePoints,e.correctAnswers.forEach((function(e,r){var a=t[r];!0===e?(a.toggleEffect("correct",!0),a.showScoreExplanation(n.scorePoints.getElement(!0))):(a.toggleEffect("wrong",!0),n.options.penalties&&"positions"===n.options.scoringMode&&a.showScoreExplanation(n.scorePoints.getElement(!1)))}))},n.computeResults=function(){var t,n=this,r=0,a=this.getDraggables(),i=this.paragraphs.map((function(t){return t.getDOM()})),s=a.map((function(t){return i.indexOf(t)}));return"positions"===this.options.scoringMode?(t=e.createArray(this.paragraphs.length),r=s.reduce((function(e,r,s){var o=r===s||n.options.duplicatesInterchangeable&&a[s].innerText===i[s].innerText;return t[s]=o,e+=o?1:0,e+=!o&&n.options.penalties?-1:0}),0)):"transitions"===this.options.scoringMode&&function(){t=e.createArray(n.paragraphs.length-1);for(var o=a.map((function(t){return t.innerText})),c=i.map((function(t){return t.innerText})),u=function(e){var a=[o[e],o[e+1]],i=c.reduce((function(t,e,n){return!0===t||n!==c.length-1&&(e===a[0]&&c[n+1]===a[1])}),!1);n.options.duplicatesInterchangeable&&i||s[e]===s[e+1]-1?(t[e]=!0,r++):t[e]=!1},l=0;l<s.length-1;l++)u(l)}(),{correctAnswers:t,score:Math.max(0,r)}},n.buildList=function(t){var e=this,n=document.createElement("div");return n.setAttribute("role","list"),n.setAttribute("aria-label",this.params.a11y.listDescription),n.classList.add("h5p-sort-paragraphs-list"),t.forEach((function(r,a){n.appendChild(r.getDOM()),a!==t.length-1&&n.appendChild(e.separators[a].getDOM())})),n},n.buildParagraph=function(t){var e=this;return new a({text:t,l10n:this.params.l10n,options:{addButtonsForMovement:this.params.addButtonsForMovement}},{onMoveUp:function(t){return e.handleDraggableMoved(t,"up")},onMoveDown:function(t){return e.handleDraggableMoved(t,"down")},onFocusOut:function(t){return e.handleDraggableFocusOut(t)},onDragStart:function(t){return e.handleDraggableDragStart(t)},onDragEnter:function(t){return e.handleDraggableDragEnter(t)},onDragLeave:function(t){return e.handleDraggableDragLeave(t)},onDragEnd:function(t){return e.handleDraggableDragEnd(t)},onKeyboardUp:function(t){return e.handleDraggableKeyboardMoved(t,"up")},onKeyboardDown:function(t){return e.handleDraggableKeyboardMoved(t,"down")},onKeyboardSelect:function(t){return e.handleDraggableKeyboardSelect(t)},onKeyboardCancel:function(t){return e.handleDraggableKeyboardCancel(t)},onMouseDown:function(t){return e.handleDraggableMouseDown(t)},onMouseUp:function(t){return e.handleDraggableMouseUp(t)}})},n.buildAriaTemplates=function(){return{selected:"".concat(this.params.a11y.paragraph," ").concat(this.params.a11y.sevenOfNine,". ").concat(this.isAnswerGiven()?"":this.params.a11y.instructionsSelected+". ","@text"),grabbed:"".concat(this.params.a11y.paragraph," ").concat(this.params.a11y.grabbed,". ").concat(this.params.a11y.currentPosition,": ").concat(this.params.a11y.sevenOfNine,". ").concat(this.isAnswerGiven()?"":this.params.a11y.instructionsGrabbed+"."),moved:"".concat(this.params.a11y.paragraph," ").concat(this.params.a11y.moved,". ").concat(this.params.a11y.currentPosition,": ").concat(this.params.a11y.sevenOfNine,"."),dropped:"".concat(this.params.a11y.paragraph," ").concat(this.params.a11y.dropped,". ").concat(this.params.a11y.finalPosition,": ").concat(this.params.a11y.sevenOfNine,"."),cancelled:"".concat(this.params.a11y.reorderCancelled,". ").concat(this.params.a11y.paragraph," ").concat(this.params.a11y.sevenOfNine,". ").concat(this.isAnswerGiven()?"":this.params.a11y.instructionsSelected+". ","@text"),resultPositions:"".concat(this.params.a11y.paragraph," ").concat(this.params.a11y.sevenOfNine,". @result. @points. @text"),resultTransitions:"".concat(this.params.a11y.paragraph," ").concat(this.params.a11y.sevenOfNine,". ").concat(this.params.a11y.nextParagraph," @result. @points. @text"),neutral:"".concat(this.params.a11y.paragraph," ").concat(this.params.a11y.sevenOfNine,". @text"),solution:"".concat(this.params.a11y.correctParagraph," ").concat(this.params.a11y.sevenOfNine,". @text")}},n.handleDraggableMoved=function(t,e){var n,r=this,a=this.getDraggableIndex(t);"up"===e&&a>0?n=a-1:"down"===e&&a<this.paragraphs.length&&(n=a+1),void 0!==n&&(this.handleInteracted(),this.swapDOMElements(t,this.getDraggableAt(n),(function(){r.resetDraggablesTabIndex(),r.resetDraggables(),r.resetAriaLabels()})))},n.handleDraggableFocusOut=function(t){this.getParagraph(t).unselect(),this.resetAriaLabels(),this.isMouseDownOnDraggable||(this.selectedDraggable=null)},n.handleDraggableDragStart=function(t){var e=this;this.oldOrder=this.getDraggablesOrder(),this.draggedElement=t,this.getDraggables().forEach((function(t){e.getParagraph(t).hideButtons()}))},n.handleDraggableDragEnter=function(t){this.dropzoneElement&&this.dropzoneElement===t||(this.dropzoneElement=t,this.dropzoneElement&&this.draggedElement&&this.draggedElement!==this.dropzoneElement&&(e.swapDOMElements(this.draggedElement,this.dropzoneElement),this.getParagraph(this.draggedElement).attachPlaceholder()))},n.handleDraggableDragLeave=function(){this.dropzoneElement=null},n.handleDraggableDragEnd=function(){var t=this,e=this.getDraggablesOrder();this.oldOrder.some((function(t,n){return t!==e[n]}))&&this.handleInteracted(),this.getDraggables().forEach((function(e){t.getParagraph(e).showButtons()})),this.resetDraggables(),this.draggedElement.focus(),this.selectedDraggable=null,this.draggedElement=null,this.dropzoneElement=null,this.oldOrder=null},n.handleDraggableKeyboardMoved=function(t,n){var r=this.getDraggableIndex(t);if(!("up"===n&&r<=0||"down"===n&&r>=this.paragraphs.length-1||"up"!==n&&"down"!==n)){var a=r+("up"===n?-1:1),i=this.getDraggables()[a],s=this.getParagraph(t),o=this.getParagraph(i);s.isSelected()?(e.swapDOMElements(t,i),this.resetDraggables(),this.resetAriaLabels(),this.setAriaLabel(t,{action:"moved"}),t.focus(),s.select()):(s.setTabIndex(-1),o.setTabIndex(0),o.focus())}},n.handleDraggableKeyboardSelect=function(t){var e=this.getParagraph(t);e.isSelected()?(this.undoState&&this.undoState.position!==this.getDraggableIndex(t)&&this.handleInteracted(),this.setAriaLabel(t,{action:"dropped"}),e.unselect(),this.selectedDraggable=null,this.undoState=null):(this.setAriaLabel(t,{action:"grabbed"}),e.select(),this.selectedDraggable=t,this.undoState={position:this.getDraggableIndex(t),order:this.getDraggablesOrder()})},n.handleDraggableKeyboardCancel=function(t){var e=this.getParagraph(t);if(e.unselect(),this.resetAriaLabels(),this.undoState){this.reorderDraggables(this.undoState.order),e.setTabIndex(-1);var n=this.getDraggableAt(this.undoState.position);n.setAttribute("tabIndex",0),n.focus(),this.resetDraggables(),this.resetAriaLabels(),this.setAriaLabel(n,{action:"cancelled"}),this.undoState=null}},n.handleDraggableMouseDown=function(t){this.isMouseDownOnDraggable=!0,this.getParagraph(t).toggleEffect("selected",!0)},n.handleDraggableMouseUp=function(t){var e=this,n=this.getParagraph(t);if(n.isSelected())this.selectedDraggable=null,this.setAriaLabel(t,{action:"dropped"}),n.unselect();else if(null!==this.selectedDraggable&&this.selectedDraggable!==t){this.handleInteracted();var r=this.selectedDraggable;this.swapDOMElements(t,r,(function(){e.resetDraggables(),e.resetAriaLabels(),e.setAriaLabel(r,{action:"dropped"}),r.focus(),e.selectedDraggable=null}))}else this.setAriaLabel(t,{action:"grabbed"}),n.select(),this.selectedDraggable=t;this.isMouseDownOnDraggable=!1},n.handleInteracted=function(){this.answerGiven=!0,this.ariaTemplates=this.buildAriaTemplates(),this.callbacks.onInteracted()},n.enable=function(){this.paragraphs.forEach((function(t){t.enable()})),this.enabled=!0},n.disable=function(){this.enabled=!1,this.paragraphs.forEach((function(t){t.disable()}))},n.isAnswerGiven=function(){return this.answerGiven},n.getDraggableAt=function(t){return"number"!=typeof t||t<0||t>this.paragraphs.length-1?null:this.getDraggables()[t]},n.getDraggablesOrder=function(){var t=this;return this.getDraggables().map((function(e){return t.paragraphs.indexOf(t.getParagraph(e))}))},n.getDraggableIndex=function(t){return this.getDraggables().indexOf(t)},n.getDraggables=function(){return Array.from(this.list.querySelectorAll(".h5p-sort-paragraphs-paragraph"))},n.getParagraph=function(t){return this.paragraphs.reduce((function(e,n){return null!==e?e:n.getDOM()===t?n:null}),null)},n.setAriaLabel=function(t,n){var r=this.getDraggableIndex(t)+1,a=this.paragraphs.length,i=this.getParagraph(t),s=i.getText(),o=this.ariaTemplates[n.action];"."!==(o=o.replace("@current",r).replace("@total",a).replace("@text",s).replace("@result",n.result||"").replace("@points.",n.points?"".concat(n.points,". "):"")).substr(-1)&&(o="".concat(o,".")),i.setAriaLabel(e.stripHTML(o)),-1!==["grabbed","dropped"].indexOf(n.action)&&this.callbacks.read(e.stripHTML(o))},n.resetAriaLabels=function(){var t=this;this.enabled&&(this.previousAnswerState!==this.isAnswerGiven()&&(this.previousAnswerState=this.isAnswerGiven(),this.ariaTemplates=this.buildAriaTemplates()),this.getDraggables().forEach((function(e){t.setAriaLabel(e,{action:"selected"})})))},n.resetDraggablesTabIndex=function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=this.getDraggables();n.forEach((function(n,r){var a=t.getParagraph(n);0===r?a.setTabIndex(null!==e?e:0):a.setTabIndex(null!==e?e:-1)}))},n.resetDraggables=function(){var t=this,e=this.getDraggables();e.forEach((function(n,r){var a=t.getParagraph(n);a.toggleEffect("over",!1),a.toggleEffect("ghosted",!1),0===r?(a.toggleButton("up",!1),a.toggleButton("down",!0)):r===e.length-1?(a.toggleButton("up",!0),a.toggleButton("down",!1)):(a.toggleButton("up",!0),a.toggleButton("down",!0))}))},n.swapDOMElements=function(t,e,n){var r=this;if(t&&t.parentNode&&e&&e.parentNode){if(t.offsetTop-e.offsetTop>0){var a=t;t=e,e=a}this.transitionElement1=t,this.transitionElement2=e,this.transitionElements=this.getDraggables(),this.transitionDone=n,this.transitionElements.forEach((function(t){var e=r.getParagraph(t);e.hideButtons(),e.unselect()})),this.transitionElement1.addEventListener("transitionend",this.handleSwapTransitionEnded),setTimeout((function(){r.transitionElements.forEach((function(n){var a,i=r.getParagraph(n);a=n===r.transitionElement1?-1*(r.transitionElement1.offsetTop-r.transitionElement2.offsetTop-r.transitionElement2.offsetHeight+r.transitionElement1.offsetHeight):n===r.transitionElement2?-1*(r.transitionElement2.offsetTop-r.transitionElement1.offsetTop):n.offsetTop<t.offsetTop||n.offsetTop>e.offsetTop?0:r.transitionElement2.offsetHeight-r.transitionElement1.offsetHeight,i.translate({y:a}),i.disable()}))}),0)}},n.handleSwapTransitionEnded=function(){var t=this;e.swapDOMElements(this.transitionElement1,this.transitionElement2),this.getDraggables().forEach((function(e){e.removeEventListener("transitionend",t.handleSwapTransitionEnded),t.getParagraph(e).translate(),"task"===t.viewState&&(t.getParagraph(e).showButtons(),t.getParagraph(e).enable())})),this.transitionDone()},n.reset=function(){this.list.setAttribute("aria-label",this.params.a11y.listDescription),this.answerGiven=!1,this.ariaTemplates=this.buildAriaTemplates(),this.hideResults(),this.paragraphs.forEach((function(t){t.toggleEffect("correct",!1),t.toggleEffect("wrong",!1),t.toggleEffect("solution",!1),t.showButtons()})),e.shuffleDOMElements(this.paragraphs.map((function(t){return t.getDOM()}))),this.enable(),this.resetDraggablesTabIndex(),this.resetDraggables(),this.resetAriaLabels()},n.setViewState=function(t,e){var n=this;e.forEach((function(t){n.content.classList.remove("h5p-sort-paragraphs-view-state-".concat(t))})),this.viewState=t,this.content.classList.add("h5p-sort-paragraphs-view-state-".concat(t))},t}();function o(t,e){return(o=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var c=function(t){var n,r;function a(n,r){var a,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};for(var s in(a=t.call(this,"sort-paragraphs")||this).params=e.extend({taskDescription:null,paragraphs:[],behaviour:{duplicatesInterchangeable:!0,enableSolutionsButton:!0,enableRetry:!0,scoringMode:"transitions",applyPenalties:!0,addButtonsForMovement:!0},l10n:{checkAnswer:"Check answer",showSolution:"Show solution",tryAgain:"Retry",up:"Up",down:"Down",disabled:"Disabled"},a11y:{check:"Check the answers. The responses will be marked as correct or incorrect.",showSolution:"Show the solution. The correct solution will be displayed.",retry:"Retry the task. Reset all elements and start the task over again.",listDescription:"Sortable list of paragraphs.",listDescriptionCheckAnswer:"List of paragraphs with results.",listDescriptionShowSolution:"List of paragraphs with solutions.",paragraph:"Paragraph",sevenOfNine:"@current of @total",instructionsSelected:"Press spacebar to reorder",grabbed:"grabbed",currentPosition:"Current position in list",instructionsGrabbed:"Press up and down arrow keys to change position, spacebar to drop, escape to cancel",moved:"moved",dropped:"dropped",finalPosition:"Final position",reorderCancelled:"Reorder cancelled",correct:"correct",wrong:"wrong",point:"@score point",nextParagraph:"Next paragraph",correctParagraph:"Correct paragraph at position"}},n),a.contentId=r,a.extras=i,a.params.l10n)a.params.l10n[s]=e.stripHTML(e.htmlDecode(a.params.l10n[s]));var o=i&&i.metadata&&i.metadata.defaultLanguage||"en";return a.languageTag=e.formatLanguageCode(o),a.previousState=a.extras.previousState&&a.extras.previousState.order||null,a}r=t,(n=a).prototype=Object.create(r.prototype),n.prototype.constructor=n,o(n,r);var i=a.prototype;return i.registerDomElements=function(){var t=this;this.content=new s({paragraphs:this.params.paragraphs,taskDescription:this.params.taskDescription,addButtonsForMovement:this.params.behaviour.addButtonsForMovement,duplicatesInterchangeable:this.params.behaviour.duplicatesInterchangeable,penalties:this.params.behaviour.applyPenalties,scoringMode:this.params.behaviour.scoringMode,previousState:this.previousState,a11y:this.params.a11y,l10n:{up:this.params.l10n.up,down:this.params.l10n.down,disabled:this.params.l10n.disabled}},{onInteracted:function(){t.handleInteracted()},read:function(e){t.read(e)}}),this.setViewState("task"),this.setContent(this.content.getDOM()),null===this.previousState||"results"!==this.previousState.view&&"solutions"!==this.previousState.view||H5P.externalDispatcher.on("initialized",(function(){t.setViewState("results"),t.checkAnswer()})),this.addButtons(),this.trigger("resize")},i.addButtons=function(){var t=this;this.addButton("check-answer",this.params.l10n.checkAnswer,(function(){t.checkAnswer()}),!0,{"aria-label":this.params.a11y.check},{}),this.addButton("show-solution",this.params.l10n.showSolution,(function(){t.hideButton("show-solution"),t.showSolutions()}),!1,{"aria-label":this.params.a11y.showSolution},{}),this.addButton("try-again",this.params.l10n.tryAgain,(function(){t.showButton("check-answer"),t.hideButton("show-solution"),t.hideButton("try-again"),t.resetTask(),t.trigger("resize")}),!1,{"aria-label":this.params.a11y.retry},{})},i.getAnswerGiven=function(){return this.content.isAnswerGiven()},i.getScore=function(){return this.content.computeResults().score},i.getMaxScore=function(){var t=this.params.paragraphs.length;return"positions"===this.params.behaviour.scoringMode?t:t-1},i.showSolutions=function(){this.setViewState("solutions"),this.content.showSolutions(),this.trigger("resize")},i.resetTask=function(){this.removeFeedback(),this.content.reset(),this.setViewState("task"),this.trigger("resize")},i.getXAPIData=function(){return{statement:this.getXAPIAnswerEvent().data.statement}},i.getXAPIAnswerEvent=function(){var t=this.createXAPIEvent("answered");return t.setScoredResult(this.getScore(),this.getMaxScore(),this,!0,this.isPassed()),t.data.statement.result.response=this.content.getDraggablesOrder().join("[,]"),t},i.createXAPIEvent=function(t){var n=this.createXAPIEventTemplate(t);return e.extend(n.getVerifiedStatementValue(["object","definition"]),this.getxAPIDefinition()),n},i.getxAPIDefinition=function(){var t=this,n={name:{}};return n.name[this.languageTag]=this.getTitle(),n.name["en-US"]=n.name[this.languageTag],n.description={},n.description[this.languageTag]=e.stripHTML(this.getDescription()),n.description["en-US"]=n.description[this.languageTag],n.type="http://adlnet.gov/expapi/activities/cmi.interaction",n.interactionType="sequencing",n.correctResponsesPattern=[],this.params.paragraphs.forEach((function(t,e){n.correctResponsesPattern.push(e)})),n.correctResponsesPattern=n.correctResponsesPattern.join("[,]"),n.choices=this.params.paragraphs.map((function(n,r){n=e.stripHTML(n);var a={};return a[t.languageTag]=n,a["en-US"]=a[t.languageTag],{id:r,description:a}})),n},i.checkAnswer=function(){this.content.disable(),this.hideButton("check-answer"),this.params.behaviour.enableSolutionsButton&&this.getScore()!==this.getMaxScore()&&this.showButton("show-solution"),this.params.behaviour.enableRetry&&this.showButton("try-again"),this.content.showResults();var t=this.getScore(),e=this.getMaxScore(),n=H5P.Question.determineOverallFeedback(this.params.overallFeedback,t/e),r=this.params.a11y.yourResult.replace("@score",":num").replace("@total",":total");this.setFeedback(n.trim(),t,e,r),"task"===this.viewState&&(this.trigger(this.getXAPIAnswerEvent()),this.trigger(this.createXAPIEvent("completed"))),this.setViewState("results")},i.isPassed=function(){return this.getScore()>=this.getMaxScore()},i.getTitle=function(){var t;return this.extras.metadata&&(t=this.extras.metadata.title),t=t||a.DEFAULT_DESCRIPTION,H5P.createTitle(t)},i.getDescription=function(){return this.params.taskDescription||a.DEFAULT_DESCRIPTION},i.getCurrentState=function(){return{order:this.content.getDraggablesOrder(),view:this.viewState}},i.handleInteracted=function(){this.triggerXAPI("interacted")},i.setViewState=function(t){-1!==a.VIEW_STATES.indexOf(t)&&(this.viewState=t,this.content.setViewState(t,a.VIEW_STATES))},a}(H5P.Question);c.DEFAULT_DESCRIPTION="SortParagraphs",c.VIEW_STATES=["task","results","solutions"],H5P=H5P||{},H5P.SortParagraphs=c}()}();
define ("format_tiles/browser_storage_set_up",["jquery"],function(a){"use strict";var b={GIVEN:"yes",DENIED:"no"},c={userPrefStorage:"mdl-tiles-userPrefStorage",user:"-user-"},d={local:"local",session:"session"},e={local:!1,session:!1},f,g=null,h=function(){return c.userPrefStorage+c.user+f},i=function storageAllowed(){if(null!==g){return g}else{var a=localStorage.getItem(h());if(a){g=a===b.GIVEN;return g}else{return null}}},j=function setAllowed(a){if(a){g=!0;localStorage.setItem(h(),b.GIVEN)}else{g=!1;localStorage.setItem(h(),b.DENIED)}},k=function(){require(["core/str","core/notification"],function(a,b){a.get_strings([{key:"datapref",component:"format_tiles"},{key:"dataprefquestion",component:"format_tiles"},{key:"yes"},{key:"cancel"}]).done(function(a){b.confirm(a[0],a[1],a[2],a[3],function(){j(!0)},function(){j(!1)})})})},l=function(a){var b;try{if(a===d.local){b=localStorage}else if(a===d.session){b=sessionStorage}if("undefined"==typeof b){return!1}b.setItem("testItem","testValue");if("testValue"===b.getItem("testItem")){b.removeItem("testItem");return!0}return!1}catch(a){require(["core/log"],function(b){b.debug(a)});return!1}};return{setAllowed:function setAllowed(a){j(a)},storageAllowed:function storageAllowed(){return i()},getStorageKey:function getStorageKey(){return h()},Enabled:e,init:function init(b,c){f=b;a(document).ready(function(){e.local=l(d.local);e.session=l(d.session);if(c){g=!0}else if(null===i()&&e.local){setTimeout(function(){k()},3e3)}a("a[href*=\"datapref\"]").click(function(a){a.preventDefault();k()})})}}});
//# sourceMappingURL=browser_storage_set_up.min.js.map
